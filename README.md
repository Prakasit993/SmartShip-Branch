# Project To-Do ‚Äì SmartShip Branch Assistant

‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÉ‡∏ô ClickUp / GitHub Issues  
(‡∏ï‡∏¥‡πä‡∏Å‡πÄ‡∏ä‡πá‡∏Å‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤)

---

## 0. Repo & Project Setup

- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á GitHub repo `SmartShip-Branch` (‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á)
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå `README.md` (Project Overview + Goals)
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `docs/`
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏´‡∏•‡∏±‡∏Å:
  - [ ] `docs/use-cases.md`
  - [ ] `docs/data-model.md`
  - [ ] `docs/architecture.md`
  - [ ] `docs/security.md`
  - [ ] `docs/todo.md` (‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ)

---

## 1. Analysis & Documentation

- [ ] ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• AS-IS Process ‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤ J&T (‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°/‡πÅ‡∏ú‡∏ô‡∏†‡∏≤‡∏û)
- [ ] ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Problem Statement & Business Goals
- [ ] ‡∏£‡∏∞‡∏ö‡∏∏ Actors ‡∏´‡∏•‡∏±‡∏Å:
  - [ ] Customer
  - [ ] Branch Staff
  - [ ] Branch Owner
  - [ ] SmartShip System
  - [ ] J&T System
  - [ ] AI Services
- [ ] ‡∏ô‡∏¥‡∏¢‡∏≤‡∏° Scope ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö (In Scope / Out of Scope)
- [ ] ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Use Case ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:
  - [ ] UC-01: Create Shipment Draft & QR (Part 1)
  - [ ] UC-02: Scan QR & Confirm Shipment in J&T (Part 2)
  - [ ] UC-03: Create Shipment at Counter (No LINE)
  - [ ] UC-04: Daily Shipment Summary Report
  - [ ] UC-05: Customer Management (VIP/Regular)
- [ ] ‡∏™‡∏£‡∏∏‡∏õ Use Case ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô `docs/use-cases.md`
- [ ] ‡∏ß‡∏≤‡∏î/‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Context Diagram / Level 0 DFD (‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏û)

---

## 2. Data & Architecture Design

### 2.1 Data Model

- [ ] ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Conceptual Data Model (Entities ‡∏´‡∏•‡∏±‡∏Å)
- [ ] ‡πÄ‡∏ï‡∏¥‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô `docs/data-model.md` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:
  - [ ] `branches`
  - [ ] `customers`
  - [ ] `shipments`
  - [ ] `branch_daily_report`
  - [ ] `thai_locations` (reference table)
- [ ] ‡∏£‡∏∞‡∏ö‡∏∏‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç + key / index ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
- [ ] ‡∏£‡∏∞‡∏ö‡∏∏ flag ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
  - [ ] `address_validated`
  - [ ] `address_needs_staff_review`
  - [ ] `status` (draft/confirmed/sent_to_jt/...)

### 2.2 Architecture

- [ ] ‡πÄ‡∏ï‡∏¥‡∏° `docs/architecture.md` (High-Level Architecture)
- [ ] ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:
  - [ ] Actors & External Systems
  - [ ] Presentation Layer (Staff Portal / LINE/LIFF)
  - [ ] Application & Integration Layer (n8n ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡πà‡∏≤)
  - [ ] Data Layer (PostgreSQL / Supabase)
  - [ ] External Services (J&T System, AI Services, LINE)
- [ ] ‡∏£‡∏∞‡∏ö‡∏∏ Main Flows ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°:
  - [ ] Flow A ‚Äì UC-01: Create Shipment Draft & QR
  - [ ] Flow B ‚Äì UC-02: Scan QR & Confirm Shipment in J&T
  - [ ] Flow C ‚Äì Daily Summary (UC-04)
- [ ] ‡πÉ‡∏™‡πà Design Considerations:
  - [ ] Tool-agnostic (‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å n8n ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏Ç‡∏≠‡∏á‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£‡πÑ‡∏î‡πâ)
  - [ ] Scalability (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏Ç‡∏≤)
  - [ ] Security & Compliance (‡πÇ‡∏¢‡∏á‡πÑ‡∏õ `docs/security.md`)

---

## 3. MVP Implementation (Part 1 ‚Äì Branch System)

### 3.1 Backend & Database

- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡πÄ‡∏ä‡πà‡∏ô Supabase / PostgreSQL)
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á:
  - [ ] `branches`
  - [ ] `customers`
  - [ ] `shipments`
  - [ ] `branch_daily_report`
  - [ ] `thai_locations`
- [ ] Seed ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• `branches` (‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≤‡∏Ç‡∏≤‡∏à‡∏£‡∏¥‡∏á)
- [ ] ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°/‡∏≠‡∏¥‡∏°‡∏û‡∏≠‡∏£‡πå‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• `thai_locations` (‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡∏ï‡∏≥‡∏ö‡∏•/‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå)

### 3.2 Staff Portal (Web App)

- [ ] ‡∏ï‡∏±‡πâ‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå Web App (‡πÄ‡∏ä‡πà‡∏ô Next.js/React)
- [ ] ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠:
  - [ ] ‡∏´‡∏ô‡πâ‡∏≤ Login (Staff / Owner)
  - [ ] ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á Shipment (Part 1)
  - [ ] ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á QR Code ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏û‡∏±‡∏™‡∏î‡∏∏
  - [ ] ‡∏´‡∏ô‡πâ‡∏≤ ‚Äú‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö J&T (Part 2)‚Äù + ‡∏™‡πÅ‡∏Å‡∏ô QR
  - [ ] ‡∏´‡∏ô‡πâ‡∏≤ Customer Management (‡∏Ñ‡πâ‡∏ô/‡πÅ‡∏Å‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥)
  - [ ] ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å `branch_daily_report`)
- [ ] ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Backend / DB ‡∏ú‡πà‡∏≤‡∏ô API ‡∏´‡∏£‡∏∑‡∏≠ Supabase client

---

## 4. Automation & AI (n8n / Workflow Layer)

- [ ] ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á/‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ n8n (‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠ Orchestrator ‡∏≠‡∏∑‡πà‡∏ô)
- [ ] ‡∏™‡∏£‡πâ‡∏≤‡∏á Credentials ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô:
  - [ ] DB (PostgreSQL/Supabase)
  - [ ] AI Service (‡πÄ‡∏ä‡πà‡∏ô DeepSeek / OpenAI)
  - [ ] LINE / J&T API (‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ)
- [ ] Workflow A: `CreateShipmentDraft`
  - [ ] ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Staff Portal / HTTP Request
  - [ ] ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö `thai_locations`
  - [ ] ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å AI ‡∏ä‡πà‡∏ß‡∏¢ normalize address (‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ)
  - [ ] ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å `customers` + `shipments` (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ `draft`)
  - [ ] ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏´‡πâ Frontend ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á QR
- [ ] Workflow B: `ConfirmShipmentAndSendToJT`
  - [ ] ‡∏£‡∏±‡∏ö `shipment_id` ‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πÅ‡∏Å‡∏ô QR
  - [ ] ‡∏î‡∏∂‡∏á shipment ‡∏à‡∏≤‡∏Å DB
  - [ ] ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏° (‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£, COD)
  - [ ] ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ J&T System (API / automation)
  - [ ] ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ shipment ‡πÄ‡∏õ‡πá‡∏ô `sent_to_jt` ‡∏´‡∏£‡∏∑‡∏≠ `confirmed`
- [ ] Workflow C: `DailySummaryReport`
  - [ ] Trigger ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏¥‡∏î‡∏£‡πâ‡∏≤‡∏ô
  - [ ] Query `shipments` ‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô
  - [ ] ‡∏£‡∏ß‡∏°‡∏¢‡∏≠‡∏î/‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
  - [ ] ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å AI ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô summary text
  - [ ] ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á `branch_daily_report`
  - [ ] ‡∏™‡πà‡∏á‡∏™‡∏£‡∏∏‡∏õ‡πÑ‡∏õ Owner (LINE / Email)

---

## 5. Integration & Reporting

- [ ] ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö J&T:
  - [ ] ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏Å‡∏£‡∏≠‡∏Å‡∏°‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ SmartShip)
  - [ ] ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï (API / QR Payload)
- [ ] ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡πÅ‡∏°‡∏ï QR Payload ‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô:
  - [ ] ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ: branch code, shipment_id, vip_code, sender/receiver summary
- [ ] ‡∏´‡∏ô‡πâ‡∏≤ Dashboard / ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô:
  - [ ] ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏¢‡∏≠‡∏î‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô (‡∏î‡∏∂‡∏á‡∏à‡∏≤‡∏Å `branch_daily_report`)
  - [ ] filter ‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà, ‡∏™‡∏≤‡∏Ç‡∏≤, ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
- [ ] ‡∏£‡∏∞‡∏ö‡∏∏ Next Step ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° JT API ‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

---

## 6. Presentation & Portfolio

- [ ] ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Slide Deck ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏ã‡∏ô‡∏ï‡πå‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ (6‚Äì10 ‡∏™‡πÑ‡∏•‡∏î‡πå):
  - [ ] Slide 1 ‚Äì Project Intro (SmartShip Branch Assistant ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£)
  - [ ] Slide 2 ‚Äì Business Problem & Pain Points
  - [ ] Slide 3 ‚Äì Goals & Scope
  - [ ] Slide 4 ‚Äì Use Cases ‡∏´‡∏•‡∏±‡∏Å (UC-01 ‚Äì UC-04)
  - [ ] Slide 5 ‚Äì Data Model / Architecture Overview
  - [ ] Slide 6 ‚Äì ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠/Flow (Prototype ‡∏´‡∏£‡∏∑‡∏≠ Screenshot)
  - [ ] Slide 7 ‚Äì AI & Automation ‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô
  - [ ] Slide 8 ‚Äì Security & Next Steps
- [ ] ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Section ‚ÄúRole as System Analyst‚Äù ‡πÉ‡∏ô README / Slide:
  - [ ] ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡∏à‡∏≤‡∏Å‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
  - [ ] ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Process, Use Case, Data Model, Architecture, Security
  - [ ] ‡∏ß‡∏≤‡∏á Roadmap ‡∏à‡∏≤‡∏Å MVP ‡πÑ‡∏õ‡∏™‡∏π‡πà Multi-branch

---

## 7. Security & Compliance

- [ ] ‡πÄ‡∏ï‡∏¥‡∏°‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô `docs/security.md` (‡∏ï‡∏≤‡∏°‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏´‡∏•‡∏±‡∏Å)
- [ ] ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö RBAC:
  - [ ] ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå Staff
  - [ ] ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå Branch Owner
  - [ ] ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå Admin/System Owner
- [ ] Implement Login / Auth ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Staff Portal
- [ ] ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏ä‡πâ HTTPS ‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠:
  - [ ] Staff Portal ‚Üî Backend
  - [ ] Backend ‚Üî DB
  - [ ] n8n ‚Üî External Services
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö Secret:
  - [ ] API Keys / Tokens ‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô Environment Variables / n8n Credentials
  - [ ] ‡∏´‡πâ‡∏≤‡∏° hard-code ‡πÉ‡∏ô source code
- [ ] Implement Address Validation:
  - [ ] ‡πÉ‡∏ä‡πâ `thai_locations` ‡∏ï‡∏£‡∏ß‡∏à combination ‡∏ï‡∏≥‡∏ö‡∏•/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î/‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå
  - [ ] Popup ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Äú‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‚Äù ‡∏´‡∏£‡∏∑‡∏≠ ‚Äú‡πÉ‡∏´‡πâ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‚Äù
  - [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ flag `address_validated`, `address_needs_staff_review`
- [ ] ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö/‡∏™‡∏£‡πâ‡∏≤‡∏á `audit_log` (Audit Trail):
  - [ ] ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ shipment
  - [ ] ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
- [ ] ‡∏õ‡∏£‡∏±‡∏ö Logging ‡πÉ‡∏´‡πâ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡πà‡∏≠‡∏ô‡πÑ‡∏´‡∏ß‡πÉ‡∏ô log:
  - [ ] ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£
  - [ ] ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏ï‡πá‡∏°
  - [ ] VIP Code
- [ ] ‡∏ß‡∏≤‡∏á Data Retention Policy:
  - [ ] ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î shipment ‡∏Å‡∏µ‡πà‡∏õ‡∏µ
  - [ ] ‡∏ß‡∏¥‡∏ò‡∏µ anonymize / ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤
- [ ] ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Backup & Recovery:
  - [ ] Backup DB ‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
  - [ ] ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Restore ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞
- [ ] ‡∏ó‡∏ö‡∏ó‡∏ß‡∏ô Terms/Privacy ‡∏Ç‡∏≠‡∏á AI Services / J&T / LINE ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

---

### 7.5 üîê Admin Panel Setup & Security (‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Admin ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢)

#### Environment Variables ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env.local` ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏î‡∏±‡∏á‡∏ô‡∏µ‡πâ:

```bash
# ===== ADMIN ACCESS CONTROL =====
# ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö login ‡∏´‡∏ô‡πâ‡∏≤ admin (‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡πÄ‡∏î‡∏≤‡∏¢‡∏≤‡∏Å!)
ADMIN_PASSWORD=your-super-secure-password-here

# Email ‡∏Ç‡∏≠‡∏á Admin ‡∏´‡∏•‡∏±‡∏Å (‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á: Products, Settings, Bundles, Stock)
ADMIN_EMAIL=admin@yourcompany.com

# Email ‡∏Ç‡∏≠‡∏á Staff (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢ comma) - ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ Dashboard ‡πÅ‡∏•‡∏∞ Orders
STAFF_EMAILS=staff1@company.com,staff2@company.com

# ===== SUPABASE =====
NEXT_PUBLIC_SUPABASE_URL=https://xxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbG...
SUPABASE_SERVICE_ROLE_KEY=eyJhbG...  # ‡πÉ‡∏ä‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ù‡∏±‡πà‡∏á server
```

#### ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏û‡∏¥‡πà‡∏° Admin/Staff

| Role | ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ | ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå |
|------|------------|--------|
| **Admin** | ‡πÉ‡∏™‡πà email ‡πÉ‡∏ô `ADMIN_EMAIL` | ‡πÄ‡∏´‡πá‡∏ô‡∏ó‡∏∏‡∏Å‡πÄ‡∏°‡∏ô‡∏π: Dashboard, Orders, Products, Bundles, Stock, Settings |
| **Staff** | ‡πÉ‡∏™‡πà email ‡πÉ‡∏ô `STAFF_EMAILS` | ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞: Dashboard, Orders |
| **Password Login** | ‡πÉ‡∏ä‡πâ `ADMIN_PASSWORD` ‡πÉ‡∏ô login ‡∏´‡∏ô‡πâ‡∏≤ admin | Full Admin Access |

#### Security Protections

**üõ°Ô∏è ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin Panel**

| Protection | Status | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î |
|------------|--------|------------|
| Middleware Protection | ‚úÖ | ‡∏ó‡∏∏‡∏Å route `/admin/*` ‡∏ñ‡∏π‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö session |
| HttpOnly Cookie | ‚úÖ | ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô XSS ‡∏Ç‡πÇ‡∏°‡∏¢ session |
| Email Allowlist | ‚úÖ | OAuth login ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ email ‡πÉ‡∏ô `ADMIN_EMAIL` ‡∏´‡∏£‡∏∑‡∏≠ `STAFF_EMAILS` |
| RBAC | ‚úÖ | Staff ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤ Products/Settings/Bundles/Stock |
| Secure Auth | ‚úÖ | ‡πÉ‡∏ä‡πâ `supabase.auth.getUser()` (server-side validation) |
| Security Logging | ‚úÖ | ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£ login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à/‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß |

**üõ°Ô∏è ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Customer (User ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤)**

| Protection | Status | ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î |
|------------|--------|------------|
| Route Protection | ‚úÖ | `/profile/*` ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ auth cookie |
| Row Level Security (RLS) | ‚úÖ | Users ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞ orders ‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á |
| OAuth only | ‚úÖ | Login ‡∏ú‡πà‡∏≤‡∏ô Google/Facebook (Supabase Auth) |
| Session Validation | ‚úÖ | ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Supabase auth token |

#### Best Practices

```bash
# ‚ùå ‡∏≠‡∏¢‡πà‡∏≤‡∏ó‡∏≥ (‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡πà‡∏≠‡∏ô‡πÅ‡∏≠)
ADMIN_PASSWORD=admin123
ADMIN_PASSWORD=password

# ‚úÖ ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥ (‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á)
ADMIN_PASSWORD=Ks8#mP2$vQ9@nL4!
```

**‡∏Ç‡πâ‡∏≠‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥:**
1. **‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô** - ‡πÉ‡∏ä‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 12 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ ‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏´‡∏ç‡πà/‡πÄ‡∏•‡πá‡∏Å ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç ‡πÅ‡∏•‡∏∞‡∏™‡∏±‡∏ç‡∏•‡∏±‡∏Å‡∏©‡∏ì‡πå
2. **HTTPS** - ‡πÉ‡∏ä‡πâ HTTPS ‡πÄ‡∏™‡∏°‡∏≠‡πÉ‡∏ô production
3. **Rotate Password** - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô admin ‡∏ó‡∏∏‡∏Å 3-6 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
4. **Review Staff List** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠ staff emails ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏¢‡∏∞

---

## 8. Optional / Future Enhancements

- [ ] ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Multi-Branch (‡∏´‡∏•‡∏≤‡∏¢‡∏™‡∏≤‡∏Ç‡∏≤‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß)
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö Notification (‡πÅ‡∏à‡πâ‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô)
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° Dashboard ‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å (Top ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏õ‡∏£‡∏∞‡∏à‡∏≥, ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á, Peak time)
- [ ] PoC ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° J&T API (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á)
- [ ] ‡πÄ‡∏û‡∏¥‡πà‡∏° Unit Test / Integration Test ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

---

# SmartShip Branch Assistant

‡∏£‡∏∞‡∏ö‡∏ö‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏™‡∏≤‡∏Ç‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á‡∏û‡∏±‡∏™‡∏î‡∏∏ (‡∏â‡∏ö‡∏±‡∏ö J&T Franchise)  
‡πÇ‡∏ü‡∏Å‡∏±‡∏™‡∏•‡∏î‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô, ‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ã‡πâ‡∏≥, ‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏° API J&T + AI ‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

---

## 1. Project Overview (‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)

**SmartShip Branch Assistant** ‡∏Ñ‡∏∑‡∏≠‡∏£‡∏∞‡∏ö‡∏ö Portal ‡πÄ‡∏•‡πá‡∏Å ‡πÜ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏≤‡∏Ç‡∏≤‡∏Ç‡∏ô‡∏™‡πà‡∏á ‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ ‚Äú‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô‚Äù ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô ‡πÇ‡∏î‡∏¢‡πÅ‡∏¢‡∏Å‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô 2 ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏•‡∏±‡∏Å:

1. **‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ‚Äì ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤ (SmartShip System)**  
   - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á/‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢  
   - ‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≤‡∏Ç‡∏≤  
   - ‡∏™‡∏£‡πâ‡∏≤‡∏á Shipment Draft + QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏≤‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö J&T

2. **‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 2 ‚Äì ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö J&T (Existing J&T System)**  
   - ‡πÉ‡∏ä‡πâ QR ‡∏à‡∏≤‡∏Å‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà 1 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡πÄ‡∏£‡πá‡∏ß  
   - ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö/‡πÄ‡∏ï‡∏¥‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö J&T (‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡πà‡∏á‚Äù ‡πÉ‡∏ô DB)

‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ **‡∏ó‡∏≥ demo ‡∏£‡∏∞‡∏î‡∏±‡∏ö System Analyst + Dev** ‡∏ó‡∏µ‡πà:

- ‡∏°‡∏µ **Use Case ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô (UC-01, UC-02)**  
- ‡∏°‡∏µ **‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á (Supabase / PostgreSQL)**  
- ‡∏°‡∏µ **‡πÄ‡∏ß‡πá‡∏ö‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏´‡πâ‡∏Å‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (Next.js)**  
- ‡∏°‡∏µ **QR Flow ‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á**: ‡∏™‡∏£‡πâ‡∏≤‡∏á ‚Üí ‡∏õ‡∏£‡∏¥‡πâ‡∏ô/‡πÅ‡∏™‡∏î‡∏á ‚Üí ‡∏™‡πÅ‡∏Å‡∏ô ‚Üí ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô

---

## 2. Business Problem & Goals

### 2.1 Pain Points ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏°‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏°‡∏∏‡∏°‡∏™‡∏≤‡∏Ç‡∏≤ J&T)

- ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà/‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ã‡πâ‡∏≥ ‡πÜ ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á  
- ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥‡∏à‡∏≤‡∏Å‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á J&T  
- ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ú‡∏¥‡∏î (‡∏ä‡∏∑‡πà‡∏≠/‡πÄ‡∏ö‡∏≠‡∏£‡πå/‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå)  
- ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏¢‡∏≠‡∏∞‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô ‚Äú‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‚Äù ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏™‡∏î‡∏∏‡∏à‡∏£‡∏¥‡∏á ‡πÜ  
- ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ô‡∏≥ AI / Automation ‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### 2.2 Goals ‡∏Ç‡∏≠‡∏á SmartShip Branch Assistant

1. **‡∏•‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô**  
   - ‡πÉ‡∏´‡πâ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ô‡πâ‡∏≠‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î  
   - ‡πÉ‡∏ä‡πâ QR Code ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≤‡∏Ç‡∏≤ vs ‡∏£‡∏∞‡∏ö‡∏ö J&T

2. **‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏≤‡∏Ç‡∏≤‡πÄ‡∏≠‡∏á**  
   - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤, ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á, ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏û‡∏±‡∏™‡∏î‡∏∏ (‡∏£‡∏∞‡∏î‡∏±‡∏ö branch)  
   - ‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∑‡πà‡∏ô‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï‡πÑ‡∏î‡πâ (n8n, Line, AI ‡∏Ø‡∏•‡∏Ø)

3. **‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î‡πÄ‡∏õ‡πá‡∏ô AI/Automation ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢**  
   - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà/‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå  
   - ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏£‡∏¥‡∏° (COD, ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‡∏Ø‡∏•‡∏Ø)  
   - ‡∏ó‡∏≥‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô/‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥

---

## 3. Scope ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (MVP 1 ‚Äì Implement ‡πÅ‡∏•‡πâ‡∏ß)

### 3.1 ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÅ‡∏•‡πâ‡∏ß

- ‚úÖ **UC-01: Create Shipment Draft & QR**
  - ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö `/shipments/new`
  - ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á/‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö  
  - ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á = ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≤‡∏Ç‡∏≤
  - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á `shipments` (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ `draft`)
  - ‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code ‡∏ó‡∏µ‡πà‡∏°‡∏µ payload:

    ```json
    {
      "shipment_id": "<UUID ‡∏à‡∏≤‡∏Å shipments.id>",
      "branch_code": "BR001"
    }
    ```

- ‚úÖ **UC-02: Scan QR & Confirm Shipment**
  - ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö `/shipments/scan`
  - ‡∏£‡∏±‡∏ö QR ‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏•‡πâ‡∏≠‡∏á (‡∏´‡∏£‡∏∑‡∏≠‡∏ß‡∏≤‡∏á JSON ‡∏•‡∏á textarea ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏•‡πâ‡∏≠‡∏á)
  - ‡∏≠‡πà‡∏≤‡∏ô `shipment_id` ‡∏à‡∏≤‡∏Å QR ‚Üí ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å `shipments`
  - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏û‡∏±‡∏™‡∏î‡∏∏‡πÉ‡∏´‡πâ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö
  - ‡∏õ‡∏∏‡πà‡∏° ‚Äú‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏±‡∏ö‡∏û‡∏±‡∏™‡∏î‡∏∏ (‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ J&T)‚Äù  
    ‚Üí update `shipments.status = 'confirmed'`  
    ‚Üí set `confirmed_at`, `confirmed_by`

### 3.2 ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ / DB ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î

- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `thai_locations` ‚Äì ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î/‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡∏ï‡∏≥‡∏ö‡∏•/‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå (‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö address)  
- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á `audit_log` ‚Äì ‡πÉ‡∏ä‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç ‡πÄ‡∏ä‡πà‡∏ô `CREATE_SHIPMENT`, `CONFIRM_SHIPMENT` (‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà implement logic ‡πÄ‡∏ï‡πá‡∏°)  
- ‡πÇ‡∏Ñ‡∏£‡∏á security / hardening ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÑ‡∏ß‡πâ‡πÉ‡∏ô README + docs (RLS, ‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å role ‡∏Ø‡∏•‡∏Ø) ‚Äì ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô guideline ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï

---

## 4. System Design

### 4.1 High-level Architecture

```mermaid
flowchart LR
    C[Customer<br/>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô] -->|‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏á‡∏Ç‡∏≠‡∏á| S(Branch Staff)

    subgraph Portal[SmartShip Branch Portal<br/>(Next.js)]
        P1[/‡∏´‡∏ô‡πâ‡∏≤ UC-01<br/>/shipments/new/]
        P2[/‡∏´‡∏ô‡πâ‡∏≤ UC-02<br/>/shipments/scan/]
    end

    S --> P1
    P1 -->|insert draft + ‡∏™‡∏£‡πâ‡∏≤‡∏á QR| DB[(Supabase<br/>PostgreSQL)]

    P1 -->|‡πÅ‡∏™‡∏î‡∏á QR Code| S

    S --> P2
    P2 -->|scan/wrap JSON<br/>{"shipment_id", "branch_code"}| P2
    P2 -->|‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• shipment| DB

    P2 -->|update status=confirmed<br/>+ confirmed_at, confirmed_by| DB

    DB --> R[(Reports / n8n / Line<br/>(‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï))]
    ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏´‡∏•‡∏±‡∏Å:

      Frontend / Portal: Next.js 15 (App Router), TypeScript, Tailwind CSS

      Database: Supabase (PostgreSQL)

      Auth (MVP): ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÅ‡∏¢‡∏Å user ‡∏à‡∏£‡∏¥‡∏á ‡πÉ‡∏ä‡πâ‡∏Ñ‡πà‡∏≤ demo_staff ‡πÉ‡∏ô confirmed_by ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô flow ‡∏Å‡πà‡∏≠‡∏ô

    QR:

      Generate: react-qr-code

      Scan: @yudiel/react-qr-scanner


